(this.webpackJsonphacker_times_web=this.webpackJsonphacker_times_web||[]).push([[0],{11:function(e,t,s){e.exports=s(23)},16:function(e,t,s){},17:function(e,t,s){e.exports=s.p+"static/media/logo.5d5d9eef.svg"},18:function(e,t,s){},20:function(e,t,s){},23:function(e,t,s){"use strict";s.r(t);var a=s(0),r=s.n(a),n=s(10),o=s.n(n),i=(s(16),s(17),s(18),s(7)),l=s.n(i),c=s(8),h=s(1),m=s(2),p=s(3),u=s(4),v=(s(20),s(6)),d=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(m.a)(s,[{key:"calculateTime",value:function(e){var t=new Date,s=Math.floor(t.getTime()/1e3)-e,a=Math.floor(s/86400),r=Math.floor(s%86400/3600),n=Math.floor(s%3600/60),o=a>0?a+"d":"",i=r>0?r+"h":"";return""!==o?o+i:""===o?i+(n>0?n+"m":""):void 0}},{key:"extractDomainFromUrl",value:function(e){try{return new URL(e).hostname.replace("www.","")}catch(t){return""}}},{key:"render",value:function(){return r.a.createElement("div",{className:"popularNewsCard"},void 0!==this.props.newsItem.htImage&&r.a.createElement("a",{href:this.props.newsItem.url,target:"_blank"},r.a.createElement("img",{className:"image",src:this.props.newsItem.htImage,alt:""})),r.a.createElement("a",{href:this.props.newsItem.url,style:{textDecoration:"none"},target:"_blank"},r.a.createElement("h2",{class:"underline-on-hover"},this.props.newsItem.title)),r.a.createElement("div",null,r.a.createElement(v.a,{lines:5,ellipsis:r.a.createElement("span",null,"... ",r.a.createElement("a",{href:this.props.newsItem.url},"Read more"))},this.props.newsItem.htDescription)),r.a.createElement("div",{className:"footer"},r.a.createElement("div",{className:"footerRow"},r.a.createElement("a",{className:"alignTextLeft",href:this.props.newsItem.url},this.extractDomainFromUrl(this.props.newsItem.url)),r.a.createElement("div",null,this.calculateTime(this.props.newsItem.time)," ago")),r.a.createElement("div",{className:"footerRow"},r.a.createElement("div",{className:"comments"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"}),r.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),r.a.createElement("div",null,r.a.createElement("a",{href:"https://news.ycombinator.com/item?id="+this.props.newsItem.id},void 0===this.props.newsItem.kids?0:this.props.newsItem.kids.length," comments"))),r.a.createElement("div",null,this.props.newsItem.score," points"))))}}]),s}(r.a.Component),f=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(m.a)(s,[{key:"calculateTime",value:function(e){var t=new Date,s=Math.floor(t.getTime()/1e3)-e,a=Math.floor(s/86400),r=Math.floor(s%86400/3600),n=Math.floor(s%3600/60),o=a>0?a+"d":"",i=r>0?r+"h":"";return""!==o?o+i:""===o?i+(n>0?n+"m":""):void 0}},{key:"extractDomainFromUrl",value:function(e){try{return new URL(e).hostname.replace("www.","")}catch(t){return""}}},{key:"truncateString",value:function(e){if(void 0!==e)return e.length<200?e:e.substring(0,200)+"...";return" ".padEnd(200)}},{key:"render",value:function(){return r.a.createElement("div",{className:"newsCard2"},r.a.createElement("a",{href:this.props.newsItem.url,target:"_blank"},r.a.createElement("h3",{class:"underline-on-hover"}," ",this.props.newsItem.title)),r.a.createElement("div",null,void 0!==this.props.newsItem.htImage&&r.a.createElement("a",{href:this.props.newsItem.url,target:"_blank"},r.a.createElement("img",{className:"floatImageRight",src:this.props.newsItem.htImage,alt:""})),r.a.createElement(v.a,{lines:3,ellipsis:r.a.createElement("span",null,"... ",r.a.createElement("a",{href:this.props.newsItem.url},"Read more"))},this.props.newsItem.htDescription)),r.a.createElement("div",{className:"footer"},r.a.createElement("div",{className:"footerRow"},r.a.createElement("a",{className:"alignTextLeft",href:this.props.newsItem.url},this.extractDomainFromUrl(this.props.newsItem.url)),r.a.createElement("div",null,this.calculateTime(this.props.newsItem.time)," ago")),r.a.createElement("div",{className:"footerRow"},r.a.createElement("div",{className:"comments"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"}),r.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),r.a.createElement("div",null,r.a.createElement("a",{href:"https://news.ycombinator.com/item?id="+this.props.newsItem.id},void 0===this.props.newsItem.kids?0:this.props.newsItem.kids.length," comments"))),r.a.createElement("div",null,this.props.newsItem.score," points"))))}}]),s}(r.a.Component),g=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(m.a)(s,[{key:"render",value:function(){return r.a.createElement("div",{className:"section1"},r.a.createElement("div",{id:"section1col1"},void 0!==this.props.stories[0]&&r.a.createElement(d,{newsItem:this.props.stories[0]})),r.a.createElement("div",{id:"section1col2"},void 0!==this.props.stories[1]&&r.a.createElement(d,{newsItem:this.props.stories[1]}),void 0!==this.props.stories[2]&&r.a.createElement(f,{newsItem:this.props.stories[2]})),r.a.createElement("div",{id:"section1col3"},void 0!==this.props.stories[3]&&r.a.createElement(d,{newsItem:this.props.stories[3]}),void 0!==this.props.stories[4]&&r.a.createElement(f,{newsItem:this.props.stories[4]})))}}]),s}(r.a.Component),w=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(m.a)(s,[{key:"render",value:function(){return r.a.createElement("div",{className:"section2"},r.a.createElement("div",{className:"section2Col1",style:{borderRight:"1px solid black"}},r.a.createElement("div",null,void 0!==this.props.stories[0]&&r.a.createElement(d,{newsItem:this.props.stories[0]})),r.a.createElement("div",null,void 0!==this.props.stories[1]&&r.a.createElement(f,{newsItem:this.props.stories[1]}))),r.a.createElement("div",{className:"section2Col",style:{borderRight:"1px solid black"}},r.a.createElement("div",null,void 0!==this.props.stories[2]&&r.a.createElement(d,{newsItem:this.props.stories[2]})),r.a.createElement("div",null,void 0!==this.props.stories[3]&&r.a.createElement(f,{newsItem:this.props.stories[3]}))),r.a.createElement("div",{className:"section2Col",style:{borderRight:"1px solid black"}},r.a.createElement("div",null,void 0!==this.props.stories[4]&&r.a.createElement(d,{newsItem:this.props.stories[4]})),r.a.createElement("div",null,void 0!==this.props.stories[5]&&r.a.createElement(f,{newsItem:this.props.stories[5]}))),r.a.createElement("div",{className:"section2Col"},r.a.createElement("div",null,void 0!==this.props.stories[6]&&r.a.createElement(d,{newsItem:this.props.stories[6]})),r.a.createElement("div",null,void 0!==this.props.stories[7]&&r.a.createElement(f,{newsItem:this.props.stories[7]}))))}}]),s}(r.a.Component),E=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(m.a)(s,[{key:"calculateTime",value:function(e){var t=new Date,s=Math.floor(t.getTime()/1e3)-e,a=Math.floor(s/86400),r=Math.floor(s%86400/3600),n=Math.floor(s%3600/60),o=a>0?a+"d":"",i=r>0?r+"h":"";return""!==o?o+i:""===o?i+(n>0?n+"m":""):void 0}},{key:"extractDomainFromUrl",value:function(e){try{return new URL(e).hostname.replace("www.","")}catch(t){return""}}},{key:"render",value:function(){return r.a.createElement("div",{className:"popularNewsCardSection3"},r.a.createElement("div",null,void 0!==this.props.newsItem.htImage&&r.a.createElement("a",{href:this.props.newsItem.url,target:"_blank"},r.a.createElement("img",{className:"image",src:this.props.newsItem.htImage,alt:""}))),r.a.createElement("div",null,r.a.createElement("a",{href:this.props.newsItem.url,style:{textDecoration:"none"},target:"_blank"},r.a.createElement("h2",{className:"underline-on-hover"},this.props.newsItem.title)),r.a.createElement("div",null,r.a.createElement(v.a,{lines:5,ellipsis:r.a.createElement("span",null,"... ",r.a.createElement("a",{href:this.props.newsItem.url},"Read more"))},this.props.newsItem.htDescription)),r.a.createElement("div",{className:"footer"},r.a.createElement("div",{className:"footerRow"},r.a.createElement("a",{className:"alignTextLeft",href:this.props.newsItem.url},this.extractDomainFromUrl(this.props.newsItem.url)),r.a.createElement("div",null,this.calculateTime(this.props.newsItem.time)," ago")),r.a.createElement("div",{className:"footerRow"},r.a.createElement("div",{className:"comments"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},r.a.createElement("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"}),r.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),r.a.createElement("div",null,r.a.createElement("a",{href:"https://news.ycombinator.com/item?id="+this.props.newsItem.id},void 0===this.props.newsItem.kids?0:this.props.newsItem.kids.length," comments"))),r.a.createElement("div",null,this.props.newsItem.score," points")))))}}]),s}(r.a.Component),I=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(m.a)(s,[{key:"render",value:function(){return r.a.createElement("div",{className:"section3"},r.a.createElement("div",{className:"section3Col1"},void 0!==this.props.stories[0]&&r.a.createElement(E,{newsItem:this.props.stories[0]})),r.a.createElement("div",{className:"section3Col2"},void 0!==this.props.stories[1]&&r.a.createElement(E,{newsItem:this.props.stories[1]})))}}]),s}(r.a.Component),b=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(m.a)(s,[{key:"render",value:function(){return r.a.createElement("div",{className:"row4"},void 0!==this.props.stories[0]&&r.a.createElement(f,{newsItem:this.props.stories[0]}),void 0!==this.props.stories[1]&&r.a.createElement(f,{newsItem:this.props.stories[1]}))}}]),s}(r.a.Component),y=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(m.a)(s,[{key:"render",value:function(){for(var e=0,t=[];e<this.props.stories.length;){var s=this.props.stories[e];5===s.length?(console.log("pushing section1"),t.push(r.a.createElement(g,{stories:this.props.stories[e]}))):8===s.length?(console.log("pushing section2"),t.push(r.a.createElement(w,{stories:this.props.stories[e]}))):2===s.length?(console.log("pushing section3"),t.push(r.a.createElement(I,{stories:this.props.stories[e]}))):(console.log("pushing section4"),t.push(r.a.createElement(b,{stories:this.props.stories[e]}))),e+=1}return r.a.createElement("div",null,t)}}]),s}(r.a.Component),k=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(e){var a;return Object(h.a)(this,s),(a=t.call(this,e)).state={stories:[],storiesLoaded:!1},a}return Object(m.a)(s,[{key:"componentDidMount",value:function(){this.fetchTopStories()}},{key:"fetchTopStories",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,s,a,r,n,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],s=[],a=[],e.next=5,fetch("https://hacker-times.s3-us-west-1.amazonaws.com/topStories_prod");case 5:return r=e.sent,e.next=8,r.json();case 8:n=e.sent,o=this.getStoriesWithImage(n.top),t=this.getStoriesWithoutImage(n.top),console.log("no of stories without image="+t.length),s=this.getPopularStoriesWithImage(o),console.log("no of popular stories with image="+s.length),a=this.getUnPopularStoriesWithImage(o),console.log("no of unpopular stories with image="+a.length),console.log("fetch finished"),i=this.newsCardGenerator(s,a,t),console.log("result Array of stories after sorting..."),console.log(i),console.log("No of stories="+i.length),this.setState({stories:i,storiesLoaded:!0});case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPopularStoriesWithImage",value:function(e){for(var t=[],s=0;s<e.length;s++)this.isPopular(e[s])&&t.push(e[s]);return t}},{key:"getUnPopularStoriesWithImage",value:function(e){for(var t=[],s=0;s<e.length;s++)this.isPopular(e[s])||t.push(e[s]);return t}},{key:"hasImage",value:function(e){return void 0!==e.htImage}},{key:"isPopular",value:function(e){var t=new Date,s=Math.floor(t.getTime()/1e3)-e.time,a=Math.floor(s%86400/3600),r=e.score;return a<12&&a>0&&r>=10*a||a>=12&&r>=120}},{key:"getStoriesWithImage",value:function(e){for(var t=[],s=0;s<e.length;s++)this.hasImage(e[s])&&t.push(e[s]);return t}},{key:"getStoriesWithoutImage",value:function(e){for(var t=[],s=0;s<e.length;s++)this.hasImage(e[s])||t.push(e[s]);return t}},{key:"getTabName",value:function(){for(var e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t=(new Date).getDay(),s=[],a=t;a>=0;a--)s.push(a);for(var r=6;r>t;r--)s.push(r);for(var n=[],o=0;o<s.length;o++)n.push(e[s[o]]);return n}},{key:"fetchNthDayStories",value:function(){var e=Object(c.a)(l.a.mark((function e(t,s){var a,r,n,o,i,c,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),a=[],r=[],n=[],e.next=6,fetch(0===t?"https://hacker-times.s3-us-west-1.amazonaws.com/topStories_prod":"https://cors-anywhere.herokuapp.com/https://hacker-times.s3-us-west-1.amazonaws.com/"+t+"dayStories_prod");case 6:return o=e.sent,e.next=9,o.json();case 9:i=e.sent,c=this.getStoriesWithImage(i.top),a=this.getStoriesWithoutImage(i.top),console.log("no of stories without image="+a.length),r=this.getPopularStoriesWithImage(c),console.log("no of popular stories with image="+r.length),n=this.getUnPopularStoriesWithImage(c),console.log("no of unpopular stories with image="+n.length),console.log("fetch finished"),h=this.newsCardGenerator(r,n,a),console.log("result Array of stories after sorting..."),console.log(h),console.log("No of stories="+h.length),this.setState({stories:h,storiesLoaded:!0});case 23:case"end":return e.stop()}}),e,this)})));return function(t,s){return e.apply(this,arguments)}}()},{key:"newsCardGenerator",value:function(e,t,s){console.log("inside newsCardGenerator");for(var a=[];0!==e.length||0!==t.length||0!==s.length;)a.push(e.length>1?this.getSection1(e,s,t):this.getSection2(e,s,t)),a.push(this.getSection2(e,s,t)),a.push(e.length>=2?this.getSection3(e,s,t):this.getSection2(e,s,t)),a.push(this.getSection2(e,s,t));console.log("resultArray.length="+a.length);for(var r=[],n=0;n<a.length;n++)""!==a[n]&&r.push(a[n]);return console.log("final array="),console.log(r),r}},{key:"getSection1",value:function(e,t,s){var a=[];a.push(e.shift());for(var r=1;r<=2;r++){var n=this.getBlock(e,t,s);a.push(n[0]),a.push(n[1])}return a}},{key:"getSection3",value:function(e,t,s){var a=[];return a.push(e.shift()),a.push(e.shift()),a}},{key:"getSection2",value:function(e,t,s){for(var a=[],r=1;r<=4;r++){var n=this.getBlock(e,t,s);a.push(n[0]),a.push(n[1])}return a}},{key:"getBlock",value:function(e,t,s){var a=[];return 0!==e.length&&0!==t.length?(a.push(e.shift()),a.push(t.shift())):s.length>=2?(a.push(s.shift()),a.push(s.shift())):t.length>=2?(a.push(t.shift()),a.push(t.shift())):(0!==e.length&&a.push(e.shift()),0!==s.length&&a.push(s.shift()),0!==t.length&&a.push(t.shift())),a}},{key:"render",value:function(){var e=this,t=this.getTabName();return r.a.createElement("div",{className:"main-column"},r.a.createElement("div",null,r.a.createElement("h1",{className:"title"},"The McLaren Times ")),r.a.createElement("div",{className:"TabRow"},r.a.createElement("button",{className:"tab",onClick:function(t){return e.fetchTopStories()}},t[0]),r.a.createElement("button",{className:"tab",onClick:function(t){return e.fetchNthDayStories(1,t)}},t[1]),r.a.createElement("button",{className:"tab",onClick:function(t){return e.fetchNthDayStories(2,t)}},t[2]),r.a.createElement("button",{className:"tab",onClick:function(t){return e.fetchNthDayStories(3,t)}},t[3]),r.a.createElement("button",{className:"tab",onClick:function(t){return e.fetchNthDayStories(4,t)}},t[4]),r.a.createElement("button",{className:"tab",onClick:function(t){return e.fetchNthDayStories(5,t)}},t[5]),r.a.createElement("button",{className:"tab",onClick:function(t){return e.fetchNthDayStories(6,t)}},t[6])),this.state.storiesLoaded?r.a.createElement(y,{stories:this.state.stories}):"")}}]),s}(r.a.Component);var N=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(k,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[11,1,2]]]);
//# sourceMappingURL=main.ba787381.chunk.js.map